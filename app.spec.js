describe('Application', function() {
  beforeEach(module('app'));

  var controller, $scope;
  var expectedResponse = {"total_entries":4,"_embedded":{"services":[{"id":65607,"name":"Club Fitting","description":"Improve your fairway and approach play with a custom set of club by incorporating our driver fitting technology and extensive knowledge of our staff.\n","durations":[60],"prices":[5000],"detail_group_id":23040,"extra":{"image_url":"http://images.bookingbug.com/bb/driver.jpg"},"booking_time_step":60,"is_event_group":false,"type":"service","deleted":false,"company_id":41285,"duration_unit":"minute","min_advance_period":0,"max_advance_period":5184000,"min_cancel_period":86400,"booking_type_public":"reservation","booking_type_member":"reservation","min_bookings":1,"max_bookings":1,"order":65607,"child_level_service":true,"_links":{"self":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65607"},"items":{"href":"https://uk.bookingbug.com/api/v1/41285/items?service_id=65607"},"questions":{"href":"https://uk.bookingbug.com/api/v1/41285/questions?detail_group_id=23040"},"days":{"href":"https://uk.bookingbug.com/api/v1/41285/day_data?service_id=65607{&month,week,date,edate,location,event_id,person_id,resource_id}","templated":true},"times":{"href":"https://uk.bookingbug.com/api/v1/41285/time_data?service_id=65607{&event_id,date,end_date,location,person_id,resource_id,duration,single,num_resources,group_id,resource_ids}","templated":true},"book":{"href":"https://uk.bookingbug.com/api/v1/41285/basket/add_item?service_id=65607{&event_id,member_id,event_chain_id,product_id,attachment_id,deal_id,package_id,bulk_purchase_id}","templated":true},"all_children":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65607/all_children"},"company":{"href":"https://uk.bookingbug.com/api/v1/company/41285"}}},{"id":65608,"name":"Putter Fitting","description":"Whether we alter your existing putter or have a new one specifically built, a Putter Custom Fitting guarantees that you will roll the ball better, set-up more consistently and add confidence to your putting performance.\n","durations":[60],"prices":[4000],"detail_group_id":23038,"extra":{"image_url":"http://images.bookingbug.com/bb/putter.jpg"},"booking_time_step":60,"is_event_group":false,"type":"service","deleted":false,"company_id":41285,"duration_unit":"minute","min_advance_period":0,"max_advance_period":5184000,"min_cancel_period":86400,"booking_type_public":"reservation","booking_type_member":"reservation","min_bookings":1,"max_bookings":1,"order":65608,"child_level_service":true,"_links":{"self":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65608"},"items":{"href":"https://uk.bookingbug.com/api/v1/41285/items?service_id=65608"},"questions":{"href":"https://uk.bookingbug.com/api/v1/41285/questions?detail_group_id=23038"},"days":{"href":"https://uk.bookingbug.com/api/v1/41285/day_data?service_id=65608{&month,week,date,edate,location,event_id,person_id,resource_id}","templated":true},"times":{"href":"https://uk.bookingbug.com/api/v1/41285/time_data?service_id=65608{&event_id,date,end_date,location,person_id,resource_id,duration,single,num_resources,group_id,resource_ids}","templated":true},"book":{"href":"https://uk.bookingbug.com/api/v1/41285/basket/add_item?service_id=65608{&event_id,member_id,event_chain_id,product_id,attachment_id,deal_id,package_id,bulk_purchase_id}","templated":true},"all_children":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65608/all_children"},"company":{"href":"https://uk.bookingbug.com/api/v1/company/41285"}}},{"id":65663,"name":"Driver Fitting","description":"Improve your hitting distance with a Driver by incorporating our driver fitting technology and extensive knowledge of our staff. \n","durations":[60],"prices":[10000],"detail_group_id":23039,"extra":{"image_url":"http://images.bookingbug.com/bb/club.jpg"},"booking_time_step":60,"is_event_group":false,"type":"service","deleted":false,"company_id":41285,"duration_unit":"minute","min_advance_period":0,"max_advance_period":5184000,"min_cancel_period":86400,"booking_type_public":"reservation","booking_type_member":"reservation","min_bookings":1,"max_bookings":1,"order":65663,"child_level_service":true,"_links":{"self":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65663"},"items":{"href":"https://uk.bookingbug.com/api/v1/41285/items?service_id=65663"},"questions":{"href":"https://uk.bookingbug.com/api/v1/41285/questions?detail_group_id=23039"},"days":{"href":"https://uk.bookingbug.com/api/v1/41285/day_data?service_id=65663{&month,week,date,edate,location,event_id,person_id,resource_id}","templated":true},"times":{"href":"https://uk.bookingbug.com/api/v1/41285/time_data?service_id=65663{&event_id,date,end_date,location,person_id,resource_id,duration,single,num_resources,group_id,resource_ids}","templated":true},"book":{"href":"https://uk.bookingbug.com/api/v1/41285/basket/add_item?service_id=65663{&event_id,member_id,event_chain_id,product_id,attachment_id,deal_id,package_id,bulk_purchase_id}","templated":true},"all_children":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65663/all_children"},"company":{"href":"https://uk.bookingbug.com/api/v1/company/41285"}}},{"id":65664,"name":"Shoe Fitting","description":"Golf shoes are important to the success of your game, especially when you consider that the average golfer walks about 4 to 5 miles during a round, and spends about 4 to 5 hours on his feet. Meet with our staff for a fitting.","durations":[60],"prices":[2500],"detail_group_id":23041,"extra":{"image_url":"http://images.bookingbug.com/bb/shoe.jpg"},"booking_time_step":60,"is_event_group":false,"type":"service","deleted":false,"company_id":41285,"duration_unit":"minute","min_advance_period":0,"max_advance_period":5184000,"min_cancel_period":86400,"booking_type_public":"reservation","booking_type_member":"reservation","min_bookings":1,"max_bookings":1,"order":65664,"child_level_service":true,"_links":{"self":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65664"},"items":{"href":"https://uk.bookingbug.com/api/v1/41285/items?service_id=65664"},"questions":{"href":"https://uk.bookingbug.com/api/v1/41285/questions?detail_group_id=23041"},"days":{"href":"https://uk.bookingbug.com/api/v1/41285/day_data?service_id=65664{&month,week,date,edate,location,event_id,person_id,resource_id}","templated":true},"times":{"href":"https://uk.bookingbug.com/api/v1/41285/time_data?service_id=65664{&event_id,date,end_date,location,person_id,resource_id,duration,single,num_resources,group_id,resource_ids}","templated":true},"book":{"href":"https://uk.bookingbug.com/api/v1/41285/basket/add_item?service_id=65664{&event_id,member_id,event_chain_id,product_id,attachment_id,deal_id,package_id,bulk_purchase_id}","templated":true},"all_children":{"href":"https://uk.bookingbug.com/api/v1/41285/services/65664/all_children"},"company":{"href":"https://uk.bookingbug.com/api/v1/company/41285"}}}]},"_links":{"self":{"href":"https://uk.bookingbug.com/api/v1/41285/services"}}};

  describe('Controller', function() {

    beforeEach(inject(function($controller, $rootScope, $httpBackend) {
      $scope = $rootScope.$new();
      $httpBackend.when('GET', 'https://uk.bookingbug.com/api/v1/41285/services?page=1&per_page=300').respond(200, expectedResponse);
      controller = $controller('ctrl', { $scope: $scope });
      $httpBackend.flush();
    }));

    it('should return 4 services', function() {
      expect($scope.numberServices).toBe(4);
    });

    it('should have status code 200', function() {
      expect($scope.status).toBe(200);
    });
  });
});
